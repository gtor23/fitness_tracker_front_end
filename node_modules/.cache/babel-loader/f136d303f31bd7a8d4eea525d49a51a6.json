{"ast":null,"code":"import _objectSpread from\"/Users/jtorres/UIC Bootcamp/Projects/fitness_tracker/fitness_tracker_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/jtorres/UIC Bootcamp/Projects/fitness_tracker/fitness_tracker_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jtorres/UIC Bootcamp/Projects/fitness_tracker/fitness_tracker_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jtorres/UIC Bootcamp/Projects/fitness_tracker/fitness_tracker_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{storeToken}from'../auth';//do we need anything regrding the token in login file? \nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var setCurrentUser=props.setCurrentUser,loggedIn=props.loggedIn,setIsLoggedIn=props.setIsLoggedIn;// console.log('blah',setCurrentUser)\nvar handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return fetch('http://fitnesstrac-kr.herokuapp.com/api/users/login',{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({username:user.username,password:user.password})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;// console.log(typeof result.token)\nif(result.user){alert(result.message);setIsLoggedIn(result.token);storeToken(result.token);window.location.reload();}else{alert(result.message);}case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{className:\"formlog\",onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"label\",{className:\"d1\",children:\" Log-In: \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"logger\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"credential1\",placeholder:\"username\",onChange:function onChange(event){return setUser(_objectSpread(_objectSpread({},user),{},{username:event.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"credential2\",placeholder:\"password\",onChange:function onChange(event){setUser(_objectSpread(_objectSpread({},user),{},{password:event.target.value}));setCurrentUser(user.username);}}),/*#__PURE__*/_jsx(\"button\",{className:\"b1\",type:\"submit\",children:\" Sign-in \"})]})]});};export default Login;","map":{"version":3,"sources":["/Users/jtorres/UIC Bootcamp/Projects/fitness_tracker/fitness_tracker_frontend/src/components/login.js"],"names":["React","useState","storeToken","Login","props","user","setUser","setCurrentUser","loggedIn","setIsLoggedIn","handleLogin","event","preventDefault","fetch","method","headers","body","JSON","stringify","username","password","response","json","result","alert","message","token","window","location","reload","target","value"],"mappings":"4wBAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,OAAQC,UAAR,KAAyB,SAAzB,CAEA;wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,CAErB,cAAwBH,QAAQ,CAAC,EAAD,CAAhC,wCAAOI,IAAP,eAAaC,OAAb,eACA,GAAOC,CAAAA,cAAP,CAAkDH,KAAlD,CAAOG,cAAP,CAAuBC,QAAvB,CAAkDJ,KAAlD,CAAuBI,QAAvB,CAAiCC,aAAjC,CAAkDL,KAAlD,CAAiCK,aAAjC,CAEA;AAEA,GAAMC,CAAAA,WAAW,0FAAG,iBAAOC,KAAP,sIAChBA,KAAK,CAACC,cAAN,GADgB,sBAEOC,CAAAA,KAAK,CAAC,qDAAD,CAAwD,CAChFC,MAAM,CAAE,MADwE,CAEhFC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFuE,CAKhFC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,QAAQ,CAAEd,IAAI,CAACc,QADE,CAEjBC,QAAQ,CAAEf,IAAI,CAACe,QAFE,CAAf,CAL0E,CAAxD,CAFZ,QAEVC,QAFU,qCAaKA,CAAAA,QAAQ,CAACC,IAAT,EAbL,QAaVC,MAbU,eAchB;AAEA,GAAIA,MAAM,CAAClB,IAAX,CAAgB,CACZmB,KAAK,CAACD,MAAM,CAACE,OAAR,CAAL,CACAhB,aAAa,CAACc,MAAM,CAACG,KAAR,CAAb,CACAxB,UAAU,CAACqB,MAAM,CAACG,KAAR,CAAV,CACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACH,CALD,IAKK,CACDL,KAAK,CAACD,MAAM,CAACE,OAAR,CAAL,CACH,CAvBe,sDAAH,kBAAXf,CAAAA,WAAW,4CAAjB,CA2BA,mBACI,cAAM,SAAS,CAAG,SAAlB,CAA4B,QAAQ,CAAIA,WAAxC,wBAGI,cAAO,SAAS,CAAG,IAAnB,uBAHJ,cAII,aAAK,SAAS,CAAG,QAAjB,wBACI,cAAO,IAAI,CAAE,MAAb,CAAoB,SAAS,CAAG,aAAhC,CACA,WAAW,CAAG,UADd,CACyB,QAAQ,CAAI,kBAACC,KAAD,QAAWL,CAAAA,OAAO,gCAAKD,IAAL,MAAWc,QAAQ,CAACR,KAAK,CAACmB,MAAN,CAAaC,KAAjC,GAAlB,EADrC,EADJ,cAII,cAAO,IAAI,CAAE,UAAb,CAAwB,SAAS,CAAG,aAApC,CACA,WAAW,CAAG,UADd,CACyB,QAAQ,CAAI,kBAACpB,KAAD,CAAY,CAACL,OAAO,gCAAKD,IAAL,MAAWe,QAAQ,CAACT,KAAK,CAACmB,MAAN,CAAaC,KAAjC,GAAP,CAAiDxB,cAAc,CAACF,IAAI,CAACc,QAAN,CAAd,CAA+B,CADlI,EAJJ,cAOI,eAAQ,SAAS,CAAG,IAApB,CAAyB,IAAI,CAAE,QAA/B,uBAPJ,GAJJ,GADJ,CAgBH,CAlDD,CAoDA,cAAehB,CAAAA,KAAf","sourcesContent":["import React, {useState} from 'react'\nimport {storeToken} from '../auth'\n\n//do we need anything regrding the token in login file? \n\nconst Login = (props) => {\n\n    const [user, setUser] = useState('');\n    const {setCurrentUser, loggedIn, setIsLoggedIn} = props;\n\n    // console.log('blah',setCurrentUser)\n\n    const handleLogin = async (event) => {\n        event.preventDefault();\n        const response = await fetch('http://fitnesstrac-kr.herokuapp.com/api/users/login', {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                username: user.username,\n                password: user.password\n            })\n        })\n\n        const result = await response.json();\n        // console.log(typeof result.token)\n\n        if (result.user){\n            alert(result.message);\n            setIsLoggedIn(result.token);\n            storeToken(result.token);\n            window.location.reload()\n        }else{\n            alert(result.message)\n        }\n    }\n    \n\n    return (\n        <form className = 'formlog' onSubmit = {handleLogin}>\n\n            {/* <h1> Login </h1> */}\n            <label className = 'd1'> Log-In: </label>\n            <div className = 'logger'>\n                <input type ='text' className = 'credential1' \n                placeholder = 'username' onChange = {(event) => setUser({...user, username:event.target.value})} />\n\n                <input type ='password' className = 'credential2' \n                placeholder = 'password' onChange = {(event) =>  {setUser({...user, password:event.target.value}); setCurrentUser(user.username) } } />\n                \n                <button className = 'b1' type ='submit'> Sign-in </button>\n            </div>\n        </form>\n    )\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}